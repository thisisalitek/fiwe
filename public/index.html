<!DOCTYPE html>
<html lang="tr" class="dark">

<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title></title>
	<link id="favicon" href="img/web-icon.png" rel="shortcut icon" type="image/png">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.3/moment.min.js"></script>
	<script src="//cdn.socket.io/4.5.0/socket.io.min.js"></script>
	<script src="//cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
	<script src="js/config.js"></script>
	<script src="js/hahamjs/utils.js"></script>
	<script src="js/hahamjs/modals.js"></script>
	<script src="js/hahamjs/helper.js"></script>
	<script src="js/hahamjs/form-elements.js"></script>
	<script src="js/hahamjs/grid-elements.js"></script>
	<script src="js/hahamjs/haham.js"></script>
	<link rel="stylesheet" href="css/main.css">
	<script type="text/javascript">
		if(!global.token)
			location.href='/login'
	
	</script>
</head>

<body class="">
		<header id="top-panel" class="d-flex">
			<div class="d-flex align-items-center">
				<a class="menu-toggle-button border rounded ms-3 me-2 d-none d-md-block" href="javascript:toggleMenu('show')" title="Menü göster/gizle"><i class="fas fa-bars"></i></a>
				<div config-ui="logo" class="">Business Logo</div>
			</div>
			<div class="flex-fill d-flex align-items-center justify-content-end">
				<ul class="nav">
					<li class="nav-item dropdown" id="alertsDropdown">
						<a class="nav-link dropdown-toggle" href="#" id="alertsDropdownBtn" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							<i class="fas fa-bell"></i>
							<span id="unread-notification-count" class="badge badge-danger badge-counter"></span>
						</a>
						<div class="dropdown-menu dropdown-menu-md-end" aria-labelledby="alertsDropdownBtn">
							<h6 class="dropdown-header">
								Bildirim Merkezi
							</h6>
							<div id="last-notifications">
							</div>
							<a class="dropdown-item text-center small" href="#/me/notifications">Tüm bildirimleri göster</a>
						</div>
					</li>
					<li class="nav-item d-none d-md-flex dropdown">
						<a class="nav-link dropdown-toggle" id="userDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="Kullanıcı işlemleri">
							<i class="fas fa-user"></i>
						</a>
						<div class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
							<a class="dropdown-item" href="#/me/profile">Profilim
								<div class="ms-1 small text-primary">
									qwerty user name
								</div>
							</a>
							<div class="dropdown-divider"></div>
							<div class="px-1 d-flex justify-content-between">
								<a class="dropdown-item" href="javascript:changeColorScheme('light')"><i class="fas fa-sun"></i> Light</a>
								<a class="dropdown-item" href="javascript:changeColorScheme('dark')"><i class="fas fa-moon"></i> Dark</a>
							</div>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" href="javascript:logout();">Çıkış</a>
						</div>
					</li>
				</ul>
				<a class="menu-toggle-button  border rounded ms-3 me-2 d-block d-md-none" href="javascript:toggleMenu('show')" title="Menü göster/gizle"><i class="fas fa-bars fs-150"></i></a>
			</div>
		</header>
		<div id="main-content">
			<div id="side-menu" class="collapse show" style="">
				<nav class="nav nav-pills flex-column w-100">
					<div id="leftMenu"></div>
					<a id="support-link" class="nav-link d-flex align-items-center" href="https://api.whatsapp.com/send/?phone=905533521042&text=destek+almak+istiyorum" target="_blank">
						<i class="fab fa-whatsapp"></i> Support
					</a>
					<a class="nav-link d-md-none align-items-center" href="#/me/profile">
						<div><i class="fas fa-user"></i> Profilim</div>
						<div class="ms-4 small text-primary">
							qwerty111 user name
						</div>
					</a>
					<div class="nav-link d-flex d-md-none align-items-center justify-content-between p-0">
						<a class="nav-link" href="javascript:changeColorScheme('light')"><i class="fas fa-sun"></i> Light</a>
						<a class="nav-link" href="javascript:changeColorScheme('dark')"><i class="fas fa-moon"></i> Dark</a>
					</div>
					<a class="nav-link d-flex d-md-none align-items-center" href="javascript:logout();"><i class="fas fa-right-from-bracket"></i> Çıkış</a>
				</nav>
				<script type="text/javascript">
				$(document).ready(() => {
					document.getElementById('leftMenu').innerHTML = generateMenu(global.menu)
				})

				function generateMenu(menu, parent) {
					let mId = '0'
					let s = ''
					if(hashObj && hashObj.query && hashObj.query.mid) {
						mId = hashObj.query.mid
					}
					Object.keys(menu).forEach((key) => {
						let item = menu[key]
						if(item.visible !== false) {
							item.expanded = false
							item.active = item.mId == mId ? true : false
							let menuId = item.mId.replaceAll('.', '-')
							let parentMenuId = (parent ? parent.mId || '' : '').replaceAll('.', '-')
							if(item.fields != undefined) {
								Object.keys(item.fields).forEach((key2) => {
									if(item.fields[key2].mId == mId)
										item.expanded = true
								})
								s += `
			<a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#pagesCollapse${menuId}" aria-expanded="${item.expanded}" aria-controls="pagesCollapse${menuId}">
				${item.icon?'<i class="' + item.icon + '"></i>':''}${item.text || ''} <i class="fas fa-angle-down float-end"></i>
			</a>
			<div class="collapse ${item.expanded?'show':''}" id="pagesCollapse${menuId}" data-bs-parent="#pagesCollapse${parentMenuId}">
				<nav class="nav ms-2 accordion" id="navId${menuId}">
					${generateMenu(item.fields, item)}
				</nav>
			</div>
			`

							} else {
								let hrefPath = item.path + (item.path.indexOf('?') > -1 ? '&' : '?') + `mid=${item.mId}`
								s += `<a class="nav-link ${item.active?'active':''} ${parent?'ms-2':''}" href="#${hrefPath}">${item.icon?'<i class="' + item.icon + '"></i>':''}${item.text || ''}</a>`
							}
						}
					})
					return s
				}
				</script>
			</div>
			<div id="right-side" class="">
				<main class="">
					<div id="title-panel" class="d-flex justify-content-between align-items-center mt-0 mb-0 px-2 py-1">
						<div id="pageTitle" class="m-0 page-title d-flex align-items-center ellipsis">...</div>
						<div id="headerButtons" class="d-flex"></div>
					</div>
					<div class="p-2">
						<form class="row m-0 mx-1">
							<div id="mainCtrl" class="px-0 pt-2">dfdfdf</div>
						</form>
					</div>
				</main>
				<footer class="d-flex justify-content-between align-items-center px-1">
					<div class="d-flex flex-md-fill justify-content-md-start align-items-center">
						<div class="ms-2 d-flex">
							<a href="javascript:reloadHaham()" class="btn btn-success ms-2 px-2" title="Reload Haham Engine"><i class="fas fa-sync"></i></a>
						</div>
						<div class="mt-1 mx-3 text-nowrap d-flex">
							<div id="copy-right">&copy;</div> <span id="innerWidth" class="ms-2 d-none d-md-block"></span>
						</div>
					</div>
					<div class="d-md-flex ms-2 justify-content-end text-end align-items-center">
						<div id="dbLabel" class="mx-0 mx-md-3 d-flex justify-content-end align-items-center" title="Aktif veri ambarı">
							<i class="fas fa-database me-1" title=""></i> qwertyDB
						</div>
					</div>
				</footer>
			</div>
		</div>
	<a class="scroll-to-top rounded" href="javascript:scrollToTop()">
		<i class="fas fa-angle-up"></i>
	</a>
	<script type="text/javascript">
	var mainDivId = '#mainCtrl'
	if(window.location.hash == '') {
		window.location.hash = '/dashboard/main?mid=0'
		window.location.reload()
	}

	$(document).ready(() => {

		sayfayiGoster()

		window.onhashchange = () => {
			hashObj = getHashObject()

			sayfayiGoster()
		}
	})

	function sayfayiGoster() {
		if(hashObj == undefined)
			return

		publishPage(mainDivId,
			() => { //before
				anotherViewStyle(mainDivId)
				$(mainDivId).html('loading...')

				if((((hashObj || {}).query || {}).mid || '') != '') {
					$(`#leftMenu a`).removeClass('active')
					$(`#leftMenu #menu${hashObj.query.mid.replaceAll('.','-')}`).addClass('active')
				}
				toggleMenu()
			},
			() => { //after

			})
	}

	function toggleMenu(status) {
		if(status == 'show') {
			$('#side-menu').toggle(0)
		} else if(window.innerWidth < 1000) {
			$('#side-menu').hide()

		}
	}


	function anotherViewStyle(divId) {
		switch ((hashObj.query || {}).view || '') {
			case 'print':
				viewStylePrint(divId)
				break
			case 'plain':
				viewStylePlain(divId)
				break
		}
	}

	function viewStylePlain(divId) {

		$('body').addClass('plain')

	}

	function viewStylePrint(divId) {

		// $('body').hide()

		$('body').addClass('print')

		if(!document.querySelector('#printButtonPanel')) {
			let s = `<div id="printButtonPanel" class="px-2 d-flex justify-content-end align-items-center">
		<a class="btn btn-outline-light" href="javascript:frameYazdir('${divId} iframe')"><i class="fas fa-print"></i> Yazdır</a>
		<a class="btn btn-dark ms-3" href="javascript:pencereyiKapat()"><i class="fas fa-times"></i> Kapat</a>
		</div>
		`
			document.querySelector('#right-side main').insertAdjacentHTML('afterend', s)
		}

		// $('body').show()
	}
	</script>
	<script type="text/javascript">
	document.querySelector('#innerWidth').innerHTML = `${window.innerWidth}x${window.innerHeight} px`
	document.querySelector('#copy-right').innerHTML = config.copyRight || '(c)'
	</script>
	<script src="//cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
	<script src="js/script.js"></script>
</body>

</html>